<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Select City</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/styles/city.css" />
</head>
<body>

  <div class="container" role="main" aria-label="City selection container">
    <div class="header">
      <a href="javascript:history.back()" class="back-arrow" aria-label="Go back">&#8592;</a>
      <h2 class="title">Select City</h2>
    </div>

    <div class="search-box">
      <input type="text" id="city-search" placeholder="Select city to book your ride" aria-label="Search city" />
      <span class="search-icon">&#128269;</span>
    </div>

    <div class="grid" id="city-grid" role="list">
      <div class="city-card" role="listitem" style="background-image: url('/images/t.png');"><span>TIRUPATI</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/ag.png');"><span>AGRA</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/vij.png');"><span>VIJAYAWADA</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/Vizag.png');"><span>VIZAG</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/gu.png');"><span>GUNTUR</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/del.png');"><span>DELHI</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/mum.png');"><span>MUMBAI</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/kol.png');"><span>KOLKATA</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/ch.png');"><span>CHENNAI</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/ban.png');"><span>BANGALORE</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/jai.png');"><span>JAIPUR</span></div>
      <div class="city-card" role="listitem" style="background-image: url('/images/hyd.png');"><span>HYDERABAD</span></div>
    </div>
  </div>

  <script>
    const searchInput = document.getElementById('city-search');
    const cityCards = document.querySelectorAll('.city-card');

    searchInput.addEventListener('input', (event) => {
      const query = event.target.value.toLowerCase();
      cityCards.forEach(card => {
        const cityName = card.textContent.toLowerCase();
        card.style.display = cityName.includes(query) ? 'flex' : 'none';
      });
    });

    cityCards.forEach(card => {
      card.addEventListener('click', () => {
        const cityName = card.textContent.trim();
        // Get background image URL from inline style, like: background-image: url('/images/t.png')
        const bgImageStyle = card.style.backgroundImage;
        // Extract the URL between the quotes
        const imageUrlMatch = bgImageStyle.match(/url\(["']?(.*?)["']?\)/);
        const imageUrl = imageUrlMatch ? imageUrlMatch[1] : '';

        // Save object { name, image } to localStorage
        localStorage.setItem('selectedCity', JSON.stringify({ name: cityName, image: imageUrl }));

        // Redirect to search page
        window.location.href = 'search.html';
      });
    });
  </script>

</body>
</html>
